# frozen_string_literal: true

require 'rake'

cmd_images_build = 'ls'

namespace :images do
  @project['images'].each do |image|
    imagename = image.first
    namespace imagename.to_sym do
      namespace :from do
        @project['images'][imagename]['layers'].each_with_index do |layer, i|
          desc "Build image \"#{imagename}\" from layer \"#{layer}\""
          task "#{i.to_s.rjust(2, '0')}-#{layer}".to_sym do
            @commands << cmd_images_build
          end
        end
      end
    end
  end
end
